/* Copyright 2023 Carlos A. (https://github.com/dealfonso); License: https://opensource.org/license/mit/ */
(function(e,a){"use strict";let r={indentation:"  ",remove:"h1 h2 h3 h4 h5 h6 p",hide:false,skip:false,skipChildren:false,hidePlugin:true,removeAttributes:null,class:"showsource"};function l(s,e={},n=""){let t={};if(s.dataset.showsourceIndentation!==undefined){t.indentation=s.dataset.showsourceIndentation}if(s.dataset.showsourceRemove!==undefined){t.remove=s.dataset.showsourceRemove}if(s.dataset.showsourceHide!==undefined){t.hide=s.dataset.showsourceHide.toLowerCase()!="false"}if(s.dataset.showsourceSkip!==undefined){t.skip=s.dataset.showsourceSkip.toLowerCase()!="false"}if(s.dataset.showsourceSkipChildren!==undefined){t.skipChildren=s.dataset.showsourceSkipChildren.toLowerCase()!="false"}if(s.dataset.showsourceHidePlugin!==undefined){t.hidePlugin=s.dataset.showsourceHidePlugin.toLowerCase()!="false"}let a=Object.assign({},r,t,e);if(a.skip){return[]}s=s.cloneNode(true);let i=Object.assign({},e,{indentation:a.indentation,hidePlugin:a.hidePlugin});if(typeof a.remove==="string"){let e=a.remove.split(" ").join(",");if(e.trim()!=""){s.querySelectorAll(e).forEach(function(e){e.remove()})}}let o=[];if(!a.hide){o.push(n+"<"+s.tagName.toLowerCase());let t=false;let i=[];if(typeof a.removeAttributes==="string"){i=a.removeAttributes.split(" ")}for(let e of s.attributes){if(e.name.startsWith("data-showsource")){if(a.hidePlugin){continue}}if(i.includes(e.name)){continue}if(e.name.startsWith("data-")||t){o.push("  "+n+e.name+'="'+e.value+'"')}else{o[o.length-1]+=" "+e.name+'="'+e.value+'"'}t=e.name.startsWith("data-")}}if(s.children.length==0&&!a.hide){let e=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];if(e.includes(s.tagName.toLowerCase())){o[o.length-1]+=">"+s.innerHTML.trim()}else{let e=["script","style"];if(e.includes(s.tagName.toLowerCase())){o[o.length-1]+=">";let e=s.innerHTML.split("\n");while(e.length>0&&e[0].trim()==""){e.shift()}while(e.length>0&&e[e.length-1].trim()==""){e.pop()}o.push(e.join("\n"));o.push("</"+s.tagName.toLowerCase()+">")}else{if(o.length>1){o[o.length-1]+=">"+s.innerHTML.trim();o.push(n+"</"+s.tagName.toLowerCase()+">")}else{o[o.length-1]+=">"+s.innerHTML.trim()+"</"+s.tagName.toLowerCase()+">"}}}}else{if(!a.hide){o[o.length-1]+=">"}if(!a.skipChildren){for(let t of s.childNodes){if(t.nodeType==Node.TEXT_NODE){let e=t.textContent.trim();if(e!==""){o.push(n+a.indentation+e)}}else{let e=l(t,i,n+(a.hide?"":a.indentation));o=o.concat(e)}}}if(!a.hide){o.push(n+"</"+s.tagName.toLowerCase()+">")}}s.remove();return o}function t(){a.querySelectorAll("div[data-showsource]").forEach(function(e){let t=r.class;if(e.dataset.showsourceClass!==undefined){if(typeof e.dataset.showsourceClass==="string"){t=e.dataset.showsourceClass}else{console.error("The value of the data-showsource-class attribute must be a string")}}let i=a.createElement("div");let s=a.createElement("pre");let n=a.createElement("code");n.textContent=l(e).join("\n");s.appendChild(n);i.appendChild(s);t.split(" ").forEach(function(e){i.classList.add(e)});e.parentNode.insertBefore(i,e.nextSibling)})}if(a.addEventListener){a.addEventListener("DOMContentLoaded",function(){t()})}e.showsource={beautify:l,init:t}})(window,document);
