/* Copyright 2023 Carlos A. (https://github.com/dealfonso); License: https://opensource.org/license/mit/ */
(function(e,o){"use strict";let a={indentation:"  ",remove:"h1 h2 h3 h4 h5 h6 p",hide:false,skip:false,skipChildren:false,hidePlugin:true,removeAttributes:null,class:"showsource",tagLengthLimit:100,maxAttributesInRow:3,separateElements:"data-*"};function h(l,e={},r=""){let t={};if(l.dataset.showsourceIndentation!==undefined){t.indentation=l.dataset.showsourceIndentation}if(l.dataset.showsourceRemove!==undefined){t.remove=l.dataset.showsourceRemove}if(l.dataset.showsourceHide!==undefined){t.hide=l.dataset.showsourceHide.toLowerCase()!="false"}if(l.dataset.showsourceSkip!==undefined){t.skip=l.dataset.showsourceSkip.toLowerCase()!="false"}if(l.dataset.showsourceSkipChildren!==undefined){t.skipChildren=l.dataset.showsourceSkipChildren.toLowerCase()!="false"}if(l.dataset.showsourceHidePlugin!==undefined){t.hidePlugin=l.dataset.showsourceHidePlugin.toLowerCase()!="false"}let d=Object.assign({},a,t,e);if(d.skip){return[]}l=l.cloneNode(true);let i=Object.assign({},e,{indentation:d.indentation,hidePlugin:d.hidePlugin});if(typeof d.remove==="string"){let e=d.remove.split(" ").join(",");if(e.trim()!=""){l.querySelectorAll(e).forEach(function(e){e.remove()})}}let u=[];if(!d.hide){u.push(r+"<"+l.tagName.toLowerCase());let n=[];if(typeof d.removeAttributes==="string"){n=d.removeAttributes.split(" ")}let s=[];if(typeof d.separateElements==="string"){let t=d.separateElements.split(" ");for(let e of t){e=e.replace(/\*/g,".*");s.push(new RegExp(e))}}let o=0;let a=null;for(let i of l.attributes){if(i.name.startsWith("data-showsource")){if(d.hidePlugin){continue}}if(n.includes(i.name)){continue}let e=`${i.name}="${i.value}"`;let t=null;if(s.length>0){for(let e of s){if(e.test(i.name)){t=e;break}}}if(t!==null){u.push(" "+r+e);o=1;a=t;continue}if(a!==null){u.push(" "+r+e);o=1;a=null;continue}if(o>=d.maxAttributesInRow){u.push(" "+r+e);o=1;continue}if(e.length+u[u.length-1].length>d.tagLengthLimit){u.push(" "+r+e);o=1;continue}u[u.length-1]+=" "+e;o++}}if(l.children.length==0&&!d.hide){let e=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];if(e.includes(l.tagName.toLowerCase())){u[u.length-1]+=">"+l.innerHTML.trim()}else{let e=["script","style"];if(e.includes(l.tagName.toLowerCase())){u[u.length-1]+=">";let e=l.innerHTML.split("\n");while(e.length>0&&e[0].trim()==""){e.shift()}while(e.length>0&&e[e.length-1].trim()==""){e.pop()}u.push(e.join("\n"));u.push("</"+l.tagName.toLowerCase()+">")}else{if(u.length>1){u[u.length-1]+=">"+l.innerHTML.trim();u.push(r+"</"+l.tagName.toLowerCase()+">")}else{u[u.length-1]+=">"+l.innerHTML.trim()+"</"+l.tagName.toLowerCase()+">"}}}}else{if(!d.hide){u[u.length-1]+=">"}if(!d.skipChildren){for(let t of l.childNodes){if(t.nodeType==Node.TEXT_NODE){let e=t.textContent.trim();if(e!==""){u.push(r+d.indentation+e)}}else{let e=h(t,i,r+(d.hide?"":d.indentation));u=u.concat(e)}}}if(!d.hide){u.push(r+"</"+l.tagName.toLowerCase()+">")}}l.remove();return u}function t(){o.querySelectorAll("div[data-showsource]").forEach(function(e){let t=a.class;if(e.dataset.showsourceClass!==undefined){if(typeof e.dataset.showsourceClass==="string"){t=e.dataset.showsourceClass}else{console.error("The value of the data-showsource-class attribute must be a string")}}let i=o.createElement("div");let n=o.createElement("pre");let s=o.createElement("code");s.textContent=h(e).join("\n");n.appendChild(s);i.appendChild(n);t.split(" ").forEach(function(e){i.classList.add(e)});e.parentNode.insertBefore(i,e.nextSibling)})}if(o.addEventListener){o.addEventListener("DOMContentLoaded",function(){t()})}e.showsource={beautify:h,init:t,version:"1.1.0"}})(window,document);
